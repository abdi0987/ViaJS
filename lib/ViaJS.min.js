/* minimized ViaJs by abdi0987 https://github.com/abdi0987/ViaJS */"use strict";function Via(t){var e=getHashTag();this.viewElements="",this.linkClicked=!1,this.views=t||{},void 0!==t&&(this.currentState=this.defaultState=t.defaultView.view,e&&(this.currentState=e),this.init(t))}Via.prototype.init=function(t){t?window.jQuery?(this.views=$.extend(!0,this.views,t),this.compile(document.body),this.watch(),this.loadPage(),this.watchHashChange()):console.error("ViaJS Requires jQuery"):console.error("Via Init function views parameter is undefined")},Via.prototype.compile=function(t){this.viewElements=$("[via-views]")},Via.prototype.clear=function(t){this.viewElements.each(function(){$(this).html("")})},Via.prototype.watch=function(){var t=this;$("body").delegate("a[via-href]","click",function(){window.location.hash=$(this).attr("via-href");var e=getHashTag();if(t.currentState!==e)return t.linkClicked=!0,t.views[e]&&(t.currentState=e),"onhashchange"in window||t.loadPage(),!1})},Via.prototype.watchHashChange=function(){var t=this;"onhashchange"in window?window.onhashchange=function(){t.linkClicked?t.loadPage():(t.currentState=location.hash.substring(1),t.loadPage()),t.linkClicked=!1}:console.warn("This browser does not support the hashchange event!")},Via.prototype.loadPage=function(){var t=this.views[this.currentState];t||(t=this.views[this.defaultState]),t.forEach(loadPiece)};var getHashTag=function(){return window.location.hash.substring(1)},loadPiece=function(t){var e=$(t.selector);if(e.length){if(t.hidden)e.css("display","none");else if(e.css("display","block"),t.templateUrl){if(e.attr("content")===t.templateUrl)return console.log("content already present:",t.templateUrl),t.callback&&t.callback(),void(t.components&&t.components.forEach(loadPiece));e.attr("content",t.templateUrl),e.load(t.templateUrl,"",function(){t.callback&&t.callback(),t.components&&t.components.forEach(loadPiece)})}}else console.warn("selector not found:",t.selector)};
